

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>QEP Linux Driver APIs &mdash; QEP Linux Kernel Network Driver 1.3.0 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="QEP Linux Kernel Network Driver 1.3.0 documentation" href="index.html"/>
        <link rel="up" title="Driver Design" href="driver-design.html"/>
        <link rel="next" title="DebugFS Support" href="debugfs.html"/>
        <link rel="prev" title="Driver Design" href="driver-design.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> QEP Linux Kernel Network Driver
          

          
          </a>

          
            
            
              <div class="version">
                1.3.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Table of Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="system-overview.html">System Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="system-requirements.html">System Requirements</a></li>
<li class="toctree-l1"><a class="reference internal" href="userguide.html">User Guide</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="dev-guide.html">Developer Guide</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="driver-design.html">Driver Design</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">QEP Linux Driver APIs</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="debugfs.html">DebugFS Support</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="acronyms.html">Terms and Acronyms</a></li>
<li class="toctree-l1"><a class="reference internal" href="references.html">References</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">QEP Linux Kernel Network Driver</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
          <li><a href="dev-guide.html">Developer Guide</a> &raquo;</li>
        
          <li><a href="driver-design.html">Driver Design</a> &raquo;</li>
        
      <li>QEP Linux Driver APIs</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/qep-callback-apis.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="qep-linux-driver-apis">
<h1>QEP Linux Driver APIs<a class="headerlink" href="#qep-linux-driver-apis" title="Permalink to this headline">¶</a></h1>
<p><strong>QEP Network Device Operations</strong></p>
<p>This section documents the callbacks/functions exported by QEP for supporting
network device operations of Linux kernel stack.</p>
<dl class="function">
<dt id="c.qep_module_init">
int <code class="descname">qep_module_init</code><span class="sig-paren">(</span>void<span class="sig-paren">)</span><a class="headerlink" href="#c.qep_module_init" title="Permalink to this definition">¶</a></dt>
<dd><p>This is the entry point of the NIC driver.</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">void</span></code></dt>
<dd>no arguments</dd>
</dl>
<p><strong>Description</strong></p>
<ul class="simple">
<li>Called when the qep kernel module is inserted into the Linux kernel</li>
<li>Creates the debugfs directory for QEP (/sys/kernel/debug/qep_dev/) in the host file system</li>
<li>Initializes QDMA</li>
<li>Registers the qep kernel module as a PCIe driver</li>
</ul>
<p><strong>Return</strong></p>
<p>Returns 0 on Success or -EINVAL on Failure</p>
<dl class="function">
<dt id="c.qep_module_exit">
void __exit <code class="descname">qep_module_exit</code><span class="sig-paren">(</span>void<span class="sig-paren">)</span><a class="headerlink" href="#c.qep_module_exit" title="Permalink to this definition">¶</a></dt>
<dd><p>This is the exit point of the NIC driver. This function is called when driver is removed from the kernel. The driver is unregistered, libqdma and debugfs are cleaned up.</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">void</span></code></dt>
<dd>no arguments</dd>
</dl>
<dl class="function">
<dt id="c.qep_pci_probe">
int <code class="descname">qep_pci_probe</code><span class="sig-paren">(</span>struct pci_dev *<em>&nbsp;pdev</em>, const struct pci_device_id *<em>&nbsp;pci_dev_id</em><span class="sig-paren">)</span><a class="headerlink" href="#c.qep_pci_probe" title="Permalink to this definition">¶</a></dt>
<dd><p>This is probe function which is called when Linux kernel detects a PCIe device with vendor ID and device ID registered for this driver with the Linux kernel.</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">struct</span> <span class="pre">pci_dev</span> <span class="pre">*</span> <span class="pre">pdev</span></code></dt>
<dd>Pointer to PCIe device struct</dd>
<dt><code class="docutils literal"><span class="pre">const</span> <span class="pre">struct</span> <span class="pre">pci_device_id</span> <span class="pre">*</span> <span class="pre">pci_dev_id</span></code></dt>
<dd>Pointer to pci_device_id structure containing the PCIe Vendor ID and Device ID</dd>
</dl>
<p><strong>Description</strong></p>
<ul class="simple">
<li>Called when the device ID and vendor ID of a PCIe device on the PCIe bus matches with the IDs registered with the Linux kernel during module init</li>
<li>Creates a debugfs directory for the probed device and creates debugfs files for qep, stmn and cmac</li>
<li>Maps user bar (BAR2) for accessing STM-N functionality implemented in the HW</li>
<li>Reads MAC address from HW</li>
<li>Initializes STM-N, QDMA and CMAC components. The default number of queues supported is minimum of number of CPU cores and
number of MSI-X vectors supported (32). The number of queues for Tx/Rx can be changed using ethtool</li>
<li>Thread to monitor CMAC Rx sync is launched to check for Rx sync every 5 seconds. The link monitoring starts after the device state is up</li>
<li>Registers as Netdevice with Linux kernel.</li>
</ul>
<p><strong>Return</strong></p>
<p>Returns 0 on Success or error code on Failure</p>
<dl class="function">
<dt id="c.qep_pci_remove">
void <code class="descname">qep_pci_remove</code><span class="sig-paren">(</span>struct pci_dev *<em>&nbsp;pdev</em><span class="sig-paren">)</span><a class="headerlink" href="#c.qep_pci_remove" title="Permalink to this definition">¶</a></dt>
<dd><p>This function is called when PCIe device is removed from the PCIe bus.</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">struct</span> <span class="pre">pci_dev</span> <span class="pre">*</span> <span class="pre">pdev</span></code></dt>
<dd>Pointer to PCIe Device struct</dd>
</dl>
<p><strong>Description</strong></p>
<p>This function cleans up all the initialized components of the driver</p>
<dl class="function">
<dt id="c.qep_open">
int <code class="descname">qep_open</code><span class="sig-paren">(</span>struct net_device *<em>&nbsp;netdev</em><span class="sig-paren">)</span><a class="headerlink" href="#c.qep_open" title="Permalink to this definition">¶</a></dt>
<dd><p>This function is called for interface ‘UP’ request.</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">struct</span> <span class="pre">net_device</span> <span class="pre">*</span> <span class="pre">netdev</span></code></dt>
<dd>Pointer to net_device struct of the device</dd>
</dl>
<p><strong>Description</strong></p>
<ul class="simple">
<li>Called when an interface “up” request is triggered via net-tools such as ifconfig or ip-link</li>
<li>QDMA Rx and Tx queues are setup in streaming mode with bypass.</li>
<li>Per Queue NAPI for Rx and tasklet for Tx are enabled.</li>
<li>The QDMA queues are configured and activated.</li>
<li>CMAC is enabled</li>
<li>Link monitoring for CMAC Rx sync is activated</li>
<li>Rx and Tx queues operations start after CMAC Link is established</li>
</ul>
<p><strong>Return</strong></p>
<p>Returns 0 on Success or error code on Failure</p>
<dl class="function">
<dt id="c.qep_stop">
int <code class="descname">qep_stop</code><span class="sig-paren">(</span>struct net_device *<em>&nbsp;netdev</em><span class="sig-paren">)</span><a class="headerlink" href="#c.qep_stop" title="Permalink to this definition">¶</a></dt>
<dd><p>This function is called when there is a interface ‘down’ request.</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">struct</span> <span class="pre">net_device</span> <span class="pre">*</span> <span class="pre">netdev</span></code></dt>
<dd>Pointer to net_device struct of the device</dd>
</dl>
<p><strong>Description</strong></p>
<ul class="simple">
<li>Called when an interface “down” request is triggered via net-tools such as ifconfig or ip-link</li>
<li>QDMA Rx and Tx queues are stopped.</li>
<li>Per Queue NAPI for Rx and tasklet for Tx are disabled.</li>
<li>CMAC is disabled</li>
<li>Link monitoring for CMAC Rx sync is deactivated</li>
</ul>
<p><strong>Return</strong></p>
<p>Returns 0 on Success or error code on Failure</p>
<dl class="function">
<dt id="c.qep_start_xmit">
int <code class="descname">qep_start_xmit</code><span class="sig-paren">(</span>struct sk_buff *<em>&nbsp;skb</em>, struct net_device *<em>&nbsp;netdev</em><span class="sig-paren">)</span><a class="headerlink" href="#c.qep_start_xmit" title="Permalink to this definition">¶</a></dt>
<dd><p>This function is called from networking stack to send a packet</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">struct</span> <span class="pre">sk_buff</span> <span class="pre">*</span> <span class="pre">skb</span></code></dt>
<dd>Pointer to sk_buff conataining data and metadata for transfer</dd>
<dt><code class="docutils literal"><span class="pre">struct</span> <span class="pre">net_device</span> <span class="pre">*</span> <span class="pre">netdev</span></code></dt>
<dd>Pointer to net_device struct of the device</dd>
</dl>
<p><strong>Description</strong></p>
<ul class="simple">
<li>Upon receiving packets from networking stack, .ndo_start_xmit callback of net_device_ops is called with sk_buff passed as an argument.</li>
<li>Queue in which packet needs to be transmitted is identified from skb.</li>
<li>The physical address of sk_buff data and fragments are mapped to qdma_pkt_data structure and passed to <code class="xref c c-func docutils literal"><span class="pre">qdma_queue_packet_write()</span></code> API.</li>
<li>Once the packet has been DMAed, interrupt is raised by QDMA. qep_isr_tx_tophalf which is registered as the callback during initialization is called.</li>
<li>qep_isr_tx_tophalf determines the queue and schedules a tasklet and acknowledges the interrupt.</li>
<li>tasklet routine frees the sk_buff.</li>
</ul>
<blockquote>
<div><img alt="_images/tx.png" class="align-center" src="_images/tx.png" />
</div></blockquote>
<p><strong>Return</strong></p>
<p>Returns 0 on Success or error code on Failure</p>
<dl class="function">
<dt id="c.qep_rx_pkt_process">
int <code class="descname">qep_rx_pkt_process</code><span class="sig-paren">(</span>unsigned long<em>&nbsp;qhndl</em>, unsigned long<em>&nbsp;quld</em>, unsigned int<em>&nbsp;len</em>, unsigned int<em>&nbsp;sgcnt</em>, struct qdma_sw_sg *<em>&nbsp;sgl</em>, void *<em>&nbsp;udd</em><span class="sig-paren">)</span><a class="headerlink" href="#c.qep_rx_pkt_process" title="Permalink to this definition">¶</a></dt>
<dd><p>This function processes Rx DMA request</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">unsigned</span> <span class="pre">long</span> <span class="pre">qhndl</span></code></dt>
<dd>Handle to the queue on which data is received</dd>
<dt><code class="docutils literal"><span class="pre">unsigned</span> <span class="pre">long</span> <span class="pre">quld</span></code></dt>
<dd>Pointer to QEP private data</dd>
<dt><code class="docutils literal"><span class="pre">unsigned</span> <span class="pre">int</span> <span class="pre">len</span></code></dt>
<dd>Length of the packet data</dd>
<dt><code class="docutils literal"><span class="pre">unsigned</span> <span class="pre">int</span> <span class="pre">sgcnt</span></code></dt>
<dd>Number of entries in scatter gatherer list</dd>
<dt><code class="docutils literal"><span class="pre">struct</span> <span class="pre">qdma_sw_sg</span> <span class="pre">*</span> <span class="pre">sgl</span></code></dt>
<dd>Pointer to scatter gatherer list</dd>
<dt><code class="docutils literal"><span class="pre">void</span> <span class="pre">*</span> <span class="pre">udd</span></code></dt>
<dd>User logic metadata</dd>
</dl>
<p><strong>Description</strong></p>
<ul class="simple">
<li>Upon the arrival of the data packets from CMAC, QDMA  will raise interrupt based on interrupt vector configuration.</li>
<li>QDMA API provides support for registering additional top half processing function in qdma_dev_conf-&gt;:c:func:<cite>fp_descq_isr_top()</cite>
through callback and QEP driver-specific data via qdma_dev_conf-&gt;isr_top_param. This configuration shall be done as
part of <code class="xref c c-func docutils literal"><span class="pre">qdma_device_open()</span></code> API  which is called from the probe function.</li>
<li><code class="xref c c-func docutils literal"><span class="pre">qep_isr_rx_tophalf()</span></code> determines the queue, acknowledges the interrupts and schedules a NAPI for the  queue</li>
<li>Callback registered with NAPI, when executed, fetches the data from QDMA to SKB buffer and hands over the packet to the Linux kernel stack</li>
</ul>
<img alt="_images/rx.png" class="align-center" src="_images/rx.png" />
<p><strong>Return</strong></p>
<p>Returns 0 on Success or error code on Failure</p>
<dl class="function">
<dt id="c.qep_select_queue">
u16 <code class="descname">qep_select_queue</code><span class="sig-paren">(</span>struct net_device *<em>&nbsp;netdev</em>, struct sk_buff *<em>&nbsp;skb</em><span class="sig-paren">)</span><a class="headerlink" href="#c.qep_select_queue" title="Permalink to this definition">¶</a></dt>
<dd><p>This function is used to identify the queue from which packet must be transmitted.</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">struct</span> <span class="pre">net_device</span> <span class="pre">*</span> <span class="pre">netdev</span></code></dt>
<dd>Pointer to net_device struct of the device</dd>
<dt><code class="docutils literal"><span class="pre">struct</span> <span class="pre">sk_buff</span> <span class="pre">*</span> <span class="pre">skb</span></code></dt>
<dd>Pointer to sk_buff conataining data and metadata for the transfer</dd>
</dl>
<p><strong>Return</strong></p>
<p>queue id on which packet should be queued</p>
<dl class="function">
<dt id="c.qep_get_stats64">
struct rtnl_link_stats64 * <code class="descname">qep_get_stats64</code><span class="sig-paren">(</span>struct net_device *<em>&nbsp;netdev</em>, struct rtnl_link_stats64 *<em>&nbsp;stats</em><span class="sig-paren">)</span><a class="headerlink" href="#c.qep_get_stats64" title="Permalink to this definition">¶</a></dt>
<dd><p>This function provides packet statistics.</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">struct</span> <span class="pre">net_device</span> <span class="pre">*</span> <span class="pre">netdev</span></code></dt>
<dd>Pointer to net_device struct of the device</dd>
<dt><code class="docutils literal"><span class="pre">struct</span> <span class="pre">rtnl_link_stats64</span> <span class="pre">*</span> <span class="pre">stats</span></code></dt>
<dd>Pointer to struct rtnl_link_stats64 for link statistics</dd>
</dl>
<p><strong>Return</strong></p>
<p>Returns pointer to rtnl_link_stats64 struct containing stats</p>
<dl class="function">
<dt id="c.qep_change_mtu">
int <code class="descname">qep_change_mtu</code><span class="sig-paren">(</span>struct net_device *<em>&nbsp;netdev</em>, int<em>&nbsp;new_mtu</em><span class="sig-paren">)</span><a class="headerlink" href="#c.qep_change_mtu" title="Permalink to this definition">¶</a></dt>
<dd><p>This function changes MTU size of the interface</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">struct</span> <span class="pre">net_device</span> <span class="pre">*</span> <span class="pre">netdev</span></code></dt>
<dd>Pointer to net_device struct of the device</dd>
<dt><code class="docutils literal"><span class="pre">int</span> <span class="pre">new_mtu</span></code></dt>
<dd>New MTU of the device to be set</dd>
</dl>
<p><strong>Return</strong></p>
<p>Returns 0 on Success or error code on Failure</p>
<dl class="function">
<dt id="c.qep_tx_timeout">
void <code class="descname">qep_tx_timeout</code><span class="sig-paren">(</span>struct net_device *<em>&nbsp;netdev</em><span class="sig-paren">)</span><a class="headerlink" href="#c.qep_tx_timeout" title="Permalink to this definition">¶</a></dt>
<dd><p>This function is called when there is a timeout during transmission of packets. The device is restarted when this callback is called</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">struct</span> <span class="pre">net_device</span> <span class="pre">*</span> <span class="pre">netdev</span></code></dt>
<dd>Pointer to net_device struct of the device</dd>
</dl>
<p><strong>Return</strong></p>
<p>None</p>
<p><strong>QEP Ethtool Operations</strong></p>
<p>This section documents the callbacks exported by QEP for supporting ethtool
operation.</p>
<dl class="function">
<dt id="c.qep_get_drvinfo">
void <code class="descname">qep_get_drvinfo</code><span class="sig-paren">(</span>struct net_device *<em>&nbsp;netdev</em>, struct ethtool_drvinfo *<em>&nbsp;drvinfo</em><span class="sig-paren">)</span><a class="headerlink" href="#c.qep_get_drvinfo" title="Permalink to this definition">¶</a></dt>
<dd><p>This is an ethtool callback to print driver info</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">struct</span> <span class="pre">net_device</span> <span class="pre">*</span> <span class="pre">netdev</span></code></dt>
<dd>Pointer to net_device struct of the device</dd>
<dt><code class="docutils literal"><span class="pre">struct</span> <span class="pre">ethtool_drvinfo</span> <span class="pre">*</span> <span class="pre">drvinfo</span></code></dt>
<dd>Pointer to struct ethtool_drvinfo</dd>
</dl>
<p><strong>Description</strong></p>
<p>This is to support ethtool option “-i|- -driver” which shows driver information.
Module name, version and bus info are populated into <strong>drvinfo</strong>.</p>
<dl class="function">
<dt id="c.qep_get_regs_len">
int <code class="descname">qep_get_regs_len</code><span class="sig-paren">(</span>struct net_device *<em>&nbsp;netdev</em><span class="sig-paren">)</span><a class="headerlink" href="#c.qep_get_regs_len" title="Permalink to this definition">¶</a></dt>
<dd><p>This is an ethtool callback for getting the buffer length required for register dump</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">struct</span> <span class="pre">net_device</span> <span class="pre">*</span> <span class="pre">netdev</span></code></dt>
<dd>Pointer to net_device struct of the device</dd>
</dl>
<p><strong>Return</strong></p>
<p>Buffer length of registers to be dumped.</p>
<dl class="function">
<dt id="c.qep_get_regs">
void <code class="descname">qep_get_regs</code><span class="sig-paren">(</span>struct net_device *<em>&nbsp;netdev</em>, struct ethtool_regs *<em>&nbsp;regs</em>, void *<em>&nbsp;p</em><span class="sig-paren">)</span><a class="headerlink" href="#c.qep_get_regs" title="Permalink to this definition">¶</a></dt>
<dd><p>This is an ethtool callback for device register dump</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">struct</span> <span class="pre">net_device</span> <span class="pre">*</span> <span class="pre">netdev</span></code></dt>
<dd>Pointer to net_device struct of the device</dd>
<dt><code class="docutils literal"><span class="pre">struct</span> <span class="pre">ethtool_regs</span> <span class="pre">*</span> <span class="pre">regs</span></code></dt>
<dd>Pointer to ethtool_regs struct</dd>
<dt><code class="docutils literal"><span class="pre">void</span> <span class="pre">*</span> <span class="pre">p</span></code></dt>
<dd>Pointer to register dump data</dd>
</dl>
<p><strong>Description</strong></p>
<p>This is to support ethtool option “-d|- -register-dump” which provides register dump</p>
<dl class="function">
<dt id="c.qep_get_msglevel">
u32 <code class="descname">qep_get_msglevel</code><span class="sig-paren">(</span>struct net_device *<em>&nbsp;netdev</em><span class="sig-paren">)</span><a class="headerlink" href="#c.qep_get_msglevel" title="Permalink to this definition">¶</a></dt>
<dd><p>This is an ethtool callback to get the debug message level</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">struct</span> <span class="pre">net_device</span> <span class="pre">*</span> <span class="pre">netdev</span></code></dt>
<dd>Pointer to net_device struct of the device</dd>
</dl>
<p><strong>Return</strong></p>
<p>current dmesg verbosity/level</p>
<dl class="function">
<dt id="c.qep_set_msglevel">
void <code class="descname">qep_set_msglevel</code><span class="sig-paren">(</span>struct net_device *<em>&nbsp;netdev</em>, u32<em>&nbsp;data</em><span class="sig-paren">)</span><a class="headerlink" href="#c.qep_set_msglevel" title="Permalink to this definition">¶</a></dt>
<dd><p>This is an ethtool callback to set the debug message level</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">struct</span> <span class="pre">net_device</span> <span class="pre">*</span> <span class="pre">netdev</span></code></dt>
<dd>Pointer to net_device struct of the device</dd>
<dt><code class="docutils literal"><span class="pre">u32</span> <span class="pre">data</span></code></dt>
<dd>Message level</dd>
</dl>
<p><strong>Description</strong></p>
<p>This is to support ethtool option “-s|- -change msglvl | msglvl type on|off … ]”</p>
<dl class="function">
<dt id="c.qep_get_ringparam">
void <code class="descname">qep_get_ringparam</code><span class="sig-paren">(</span>struct net_device *<em>&nbsp;netdev</em>, struct ethtool_ringparam *<em>&nbsp;ring</em><span class="sig-paren">)</span><a class="headerlink" href="#c.qep_get_ringparam" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">struct</span> <span class="pre">net_device</span> <span class="pre">*</span> <span class="pre">netdev</span></code></dt>
<dd>Pointer to net_device struct of the device</dd>
<dt><code class="docutils literal"><span class="pre">struct</span> <span class="pre">ethtool_ringparam</span> <span class="pre">*</span> <span class="pre">ring</span></code></dt>
<dd>Pointer to ethtool_ringparam struct</dd>
</dl>
<p><strong>Description</strong></p>
<p>This is to support ethtool option “-g|- -show-ring” which Query Rx/Tx ring parameters</p>
<dl class="function">
<dt id="c.qep_set_ringparam">
int <code class="descname">qep_set_ringparam</code><span class="sig-paren">(</span>struct net_device *<em>&nbsp;netdev</em>, struct ethtool_ringparam *<em>&nbsp;ring</em><span class="sig-paren">)</span><a class="headerlink" href="#c.qep_set_ringparam" title="Permalink to this definition">¶</a></dt>
<dd><p>This is an ethtool callback to set ring size of Tx and Rx queues</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">struct</span> <span class="pre">net_device</span> <span class="pre">*</span> <span class="pre">netdev</span></code></dt>
<dd>Pointer to net_device struct of the device</dd>
<dt><code class="docutils literal"><span class="pre">struct</span> <span class="pre">ethtool_ringparam</span> <span class="pre">*</span> <span class="pre">ring</span></code></dt>
<dd>Pointer to ethtool_ringparam struct</dd>
</dl>
<p><strong>Description</strong></p>
<p>This is to support ethtool option  “-G|- -set-ring”  which sets Rx/Tx ring parameters</p>
<dl class="function">
<dt id="c.qep_get_channels">
void <code class="descname">qep_get_channels</code><span class="sig-paren">(</span>struct net_device *<em>&nbsp;netdev</em>, struct ethtool_channels *<em>&nbsp;ch</em><span class="sig-paren">)</span><a class="headerlink" href="#c.qep_get_channels" title="Permalink to this definition">¶</a></dt>
<dd><p>This is an ethtool callback to get number of Rx/Tx queues</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">struct</span> <span class="pre">net_device</span> <span class="pre">*</span> <span class="pre">netdev</span></code></dt>
<dd>Pointer to net_device struct of the device</dd>
<dt><code class="docutils literal"><span class="pre">struct</span> <span class="pre">ethtool_channels</span> <span class="pre">*</span> <span class="pre">ch</span></code></dt>
<dd>Pointer to ethtool_channels struct</dd>
</dl>
<p><strong>Description</strong></p>
<blockquote>
<div>This is to support ethtool option “-l|- -show-channels” which Query number of Channels.</div></blockquote>
<dl class="function">
<dt id="c.qep_get_sset_count">
int <code class="descname">qep_get_sset_count</code><span class="sig-paren">(</span>struct net_device *<em>&nbsp;netdev</em>, int<em>&nbsp;sset</em><span class="sig-paren">)</span><a class="headerlink" href="#c.qep_get_sset_count" title="Permalink to this definition">¶</a></dt>
<dd><p>This is an ethtool callback to get count of Tx/Rx stats</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">struct</span> <span class="pre">net_device</span> <span class="pre">*</span> <span class="pre">netdev</span></code></dt>
<dd>Pointer to net_device struct of the device</dd>
<dt><code class="docutils literal"><span class="pre">int</span> <span class="pre">sset</span></code></dt>
<dd>string set ID</dd>
</dl>
<p><strong>Return</strong></p>
<p>number of strings that <strong>qep_get_strings</strong> will write</p>
<dl class="function">
<dt id="c.qep_get_strings">
void <code class="descname">qep_get_strings</code><span class="sig-paren">(</span>struct net_device *<em>&nbsp;netdev</em>, u32<em>&nbsp;stringset</em>, u8 *<em>&nbsp;data</em><span class="sig-paren">)</span><a class="headerlink" href="#c.qep_get_strings" title="Permalink to this definition">¶</a></dt>
<dd><p>This is an ethtool callback to populate set of strings</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">struct</span> <span class="pre">net_device</span> <span class="pre">*</span> <span class="pre">netdev</span></code></dt>
<dd>Pointer to net_device struct of the device</dd>
<dt><code class="docutils literal"><span class="pre">u32</span> <span class="pre">stringset</span></code></dt>
<dd>string set ID</dd>
<dt><code class="docutils literal"><span class="pre">u8</span> <span class="pre">*</span> <span class="pre">data</span></code></dt>
<dd>Pointer to memory where strings are to be populated, provided by ethtool</dd>
</dl>
<p><strong>Description</strong></p>
<p>This callback only supports <strong>ETH_SS_STATS</strong> string ID needed to get strings describing the statistics.</p>
<dl class="function">
<dt id="c.qep_get_ethtool_stats">
void <code class="descname">qep_get_ethtool_stats</code><span class="sig-paren">(</span>struct net_device *<em>&nbsp;netdev</em>, struct ethtool_stats *<em>&nbsp;stats</em>, u64 *<em>&nbsp;data</em><span class="sig-paren">)</span><a class="headerlink" href="#c.qep_get_ethtool_stats" title="Permalink to this definition">¶</a></dt>
<dd><p>This is an ethtool callback to get stats</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">struct</span> <span class="pre">net_device</span> <span class="pre">*</span> <span class="pre">netdev</span></code></dt>
<dd>Pointer to net_device struct of the device</dd>
<dt><code class="docutils literal"><span class="pre">struct</span> <span class="pre">ethtool_stats</span> <span class="pre">*</span> <span class="pre">stats</span></code></dt>
<dd>Pointer to ethtool_stats struct</dd>
<dt><code class="docutils literal"><span class="pre">u64</span> <span class="pre">*</span> <span class="pre">data</span></code></dt>
<dd>Pointer to memory  where stats are to be populated, provided by ethtool</dd>
</dl>
<p><strong>Description</strong></p>
<p>This is to support ethtool option “-S|- -statistics” which shows adapter statistics.
Detailed MAC level stats which include good, bad, size based stats, error packets count, etc. is provided.</p>
<dl class="function">
<dt id="c.qep_get_coalesce">
int <code class="descname">qep_get_coalesce</code><span class="sig-paren">(</span>struct net_device *<em>&nbsp;netdev</em>, struct ethtool_coalesce *<em>&nbsp;ec</em><span class="sig-paren">)</span><a class="headerlink" href="#c.qep_get_coalesce" title="Permalink to this definition">¶</a></dt>
<dd><p>This is an ethtool callback to get global coalesce options</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">struct</span> <span class="pre">net_device</span> <span class="pre">*</span> <span class="pre">netdev</span></code></dt>
<dd>Pointer to net_device struct of the device</dd>
<dt><code class="docutils literal"><span class="pre">struct</span> <span class="pre">ethtool_coalesce</span> <span class="pre">*</span> <span class="pre">ec</span></code></dt>
<dd>Pointer to ethtool_coalesce struct</dd>
</dl>
<p><strong>Description</strong></p>
<p>This is to support ethtool option “-c|- -show-coalesce” which shows coalesce options.</p>
<dl class="function">
<dt id="c.qep_set_coalesce">
int <code class="descname">qep_set_coalesce</code><span class="sig-paren">(</span>struct net_device *<em>&nbsp;netdev</em>, struct ethtool_coalesce *<em>&nbsp;ec</em><span class="sig-paren">)</span><a class="headerlink" href="#c.qep_set_coalesce" title="Permalink to this definition">¶</a></dt>
<dd><p>This is an ethtool callback to set global coalesce options</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">struct</span> <span class="pre">net_device</span> <span class="pre">*</span> <span class="pre">netdev</span></code></dt>
<dd>Pointer to net_device struct of the device</dd>
<dt><code class="docutils literal"><span class="pre">struct</span> <span class="pre">ethtool_coalesce</span> <span class="pre">*</span> <span class="pre">ec</span></code></dt>
<dd>Pointer to ethtool_coalesce struct</dd>
</dl>
<p><strong>Description</strong></p>
<p>This is to support ethtool option “-C|- -coalesce” which sets coalesce options</p>
<p><strong>Return</strong></p>
<p>Returns 0 on Success or error code on Failure</p>
<dl class="function">
<dt id="c.qep_get_per_queue_coalesce">
int <code class="descname">qep_get_per_queue_coalesce</code><span class="sig-paren">(</span>struct net_device *<em>&nbsp;netdev</em>, u32<em>&nbsp;queue</em>, struct ethtool_coalesce *<em>&nbsp;ec</em><span class="sig-paren">)</span><a class="headerlink" href="#c.qep_get_per_queue_coalesce" title="Permalink to this definition">¶</a></dt>
<dd><p>This is an ethtool callback to get per queue coalesce options</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">struct</span> <span class="pre">net_device</span> <span class="pre">*</span> <span class="pre">netdev</span></code></dt>
<dd>Pointer to net_device struct of the device</dd>
<dt><code class="docutils literal"><span class="pre">u32</span> <span class="pre">queue</span></code></dt>
<dd>queue ID for which configuration is provided</dd>
<dt><code class="docutils literal"><span class="pre">struct</span> <span class="pre">ethtool_coalesce</span> <span class="pre">*</span> <span class="pre">ec</span></code></dt>
<dd>Pointer to ethtool_coalesce struct</dd>
</dl>
<p><strong>Description</strong></p>
<ul class="simple">
<li>This is to support ethtool option “-c|- -show-coalesce” which shows coalesce options.</li>
<li>Only rx-usecs(Timer Mode) and rx-frames(counter mode) are valid.</li>
</ul>
<p><strong>Return</strong></p>
<p>Returns 0 on Success or error code on Failure</p>
<dl class="function">
<dt id="c.qep_set_per_queue_coalesce">
int <code class="descname">qep_set_per_queue_coalesce</code><span class="sig-paren">(</span>struct net_device *<em>&nbsp;netdev</em>, u32<em>&nbsp;queue</em>, struct ethtool_coalesce *<em>&nbsp;ec</em><span class="sig-paren">)</span><a class="headerlink" href="#c.qep_set_per_queue_coalesce" title="Permalink to this definition">¶</a></dt>
<dd><p>This is an ethtool callback to set per queue coalesce options</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">struct</span> <span class="pre">net_device</span> <span class="pre">*</span> <span class="pre">netdev</span></code></dt>
<dd>Pointer to net_device struct of the device</dd>
<dt><code class="docutils literal"><span class="pre">u32</span> <span class="pre">queue</span></code></dt>
<dd>queue ID for which configuration is provided</dd>
<dt><code class="docutils literal"><span class="pre">struct</span> <span class="pre">ethtool_coalesce</span> <span class="pre">*</span> <span class="pre">ec</span></code></dt>
<dd>Pointer to ethtool_coalesce struct</dd>
</dl>
<p><strong>Description</strong></p>
<ul class="simple">
<li>This is to support ethtool option “-C|- -coalesce” which sets coalesce options.</li>
<li>Only rx-usecs(Timer Mode) and rx-frames(counter mode) are configured in this callback.</li>
</ul>
<p><strong>Return</strong></p>
<p>Returns 0 on Success or error code on Failure</p>
<dl class="function">
<dt id="c.qep_get_fecparam">
int <code class="descname">qep_get_fecparam</code><span class="sig-paren">(</span>struct net_device *<em>&nbsp;netdev</em>, struct ethtool_fecparam *<em>&nbsp;fec</em><span class="sig-paren">)</span><a class="headerlink" href="#c.qep_get_fecparam" title="Permalink to this definition">¶</a></dt>
<dd><p>This is an ethtool callback to get FEC params</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">struct</span> <span class="pre">net_device</span> <span class="pre">*</span> <span class="pre">netdev</span></code></dt>
<dd>Pointer to net_device struct of the device</dd>
<dt><code class="docutils literal"><span class="pre">struct</span> <span class="pre">ethtool_fecparam</span> <span class="pre">*</span> <span class="pre">fec</span></code></dt>
<dd>Pointer to ethtool_fecparam struct</dd>
</dl>
<p><strong>Description</strong></p>
<ul class="simple">
<li>This is to support ethtool option “- -show-fec” which shows FEC settings.</li>
</ul>
<p><strong>Return</strong></p>
<p>Returns 0 on Success or error code on Failure</p>
<dl class="function">
<dt id="c.qep_set_fecparam">
int <code class="descname">qep_set_fecparam</code><span class="sig-paren">(</span>struct net_device *<em>&nbsp;netdev</em>, struct ethtool_fecparam *<em>&nbsp;fec</em><span class="sig-paren">)</span><a class="headerlink" href="#c.qep_set_fecparam" title="Permalink to this definition">¶</a></dt>
<dd><p>This is an ethtool callback to set FEC params as AUTO, RS or OFF</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">struct</span> <span class="pre">net_device</span> <span class="pre">*</span> <span class="pre">netdev</span></code></dt>
<dd>Pointer to net_device struct of the device</dd>
<dt><code class="docutils literal"><span class="pre">struct</span> <span class="pre">ethtool_fecparam</span> <span class="pre">*</span> <span class="pre">fec</span></code></dt>
<dd>Pointer to ethtool_fecparam struct</dd>
</dl>
<p><strong>Description</strong></p>
<ul class="simple">
<li>This is to support ethtool option “- -set-fec” which sets FEC settings.</li>
<li>This is to enable or disable RS-FEC encoding in HW.</li>
</ul>
<p><strong>Return</strong></p>
<p>Returns 0 on Success or error code on Failure</p>
<dl class="function">
<dt id="c.qep_get_rxfh_key_size">
int <code class="descname">qep_get_rxfh_key_size</code><span class="sig-paren">(</span>struct net_device *<em>&nbsp;netdev</em><span class="sig-paren">)</span><a class="headerlink" href="#c.qep_get_rxfh_key_size" title="Permalink to this definition">¶</a></dt>
<dd><p>This is an ethtool callback to get the size of the Rx Flow Hash key</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">struct</span> <span class="pre">net_device</span> <span class="pre">*</span> <span class="pre">netdev</span></code></dt>
<dd>Pointer to net_device struct of the device</dd>
</dl>
<p><strong>Description</strong></p>
<ul class="simple">
<li>This is to support ethtool option “-x|- -show-rxfh-indir” which gets the Rx Flow Hash key.</li>
</ul>
<p><strong>Return</strong></p>
<p>Returns 0 on Success or error code on Failure</p>
<dl class="function">
<dt id="c.qep_rss_indir_size">
u32 <code class="descname">qep_rss_indir_size</code><span class="sig-paren">(</span>struct net_device *<em>&nbsp;netdev</em><span class="sig-paren">)</span><a class="headerlink" href="#c.qep_rss_indir_size" title="Permalink to this definition">¶</a></dt>
<dd><p>This is an ethtool callback to get the size of the Rx Flow Hash Indirection table</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">struct</span> <span class="pre">net_device</span> <span class="pre">*</span> <span class="pre">netdev</span></code></dt>
<dd>Pointer to net_device struct of the device</dd>
</dl>
<p><strong>Description</strong></p>
<ul class="simple">
<li>This is to support ethtool option “-x|- -show-rxfh-indir” which gets the Rx Flow Hash Indirection table.</li>
</ul>
<p><strong>Return</strong></p>
<p>Returns 0 on Success or error code on Failure</p>
<dl class="function">
<dt id="c.qep_get_rxfh">
int <code class="descname">qep_get_rxfh</code><span class="sig-paren">(</span>struct net_device *<em>&nbsp;netdev</em>, u32 *<em>&nbsp;indir</em>, u8 *<em>&nbsp;key</em>, u8 *<em>&nbsp;hfunc</em><span class="sig-paren">)</span><a class="headerlink" href="#c.qep_get_rxfh" title="Permalink to this definition">¶</a></dt>
<dd><p>This is an ethtool callback to get the contents of the Rx Flow Hash key and Rx Flow Hash Indirection table</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">struct</span> <span class="pre">net_device</span> <span class="pre">*</span> <span class="pre">netdev</span></code></dt>
<dd>Pointer to net_device struct of the device</dd>
<dt><code class="docutils literal"><span class="pre">u32</span> <span class="pre">*</span> <span class="pre">indir</span></code></dt>
<dd>Pointer to the RSS indirection table</dd>
<dt><code class="docutils literal"><span class="pre">u8</span> <span class="pre">*</span> <span class="pre">key</span></code></dt>
<dd>Pointer to the Rx Flow hash key</dd>
<dt><code class="docutils literal"><span class="pre">u8</span> <span class="pre">*</span> <span class="pre">hfunc</span></code></dt>
<dd>Pointer to the Rx Flow hash function</dd>
</dl>
<p><strong>Description</strong></p>
<ul class="simple">
<li>This is to support ethtool option “-x|- -show-rxfh-indir” which gets the Rx Flow Hash key and Rx Flow Hash Indirection table</li>
</ul>
<p><strong>Return</strong></p>
<p>Returns 0 on Success or error code on Failure</p>
<dl class="function">
<dt id="c.qep_set_rxfh">
int <code class="descname">qep_set_rxfh</code><span class="sig-paren">(</span>struct net_device *<em>&nbsp;netdev</em>, const u32 *<em>&nbsp;indir</em>, const u8 *<em>&nbsp;key</em>, const u8<em>&nbsp;hfunc</em><span class="sig-paren">)</span><a class="headerlink" href="#c.qep_set_rxfh" title="Permalink to this definition">¶</a></dt>
<dd><p>This is an ethtool callback to set the contents of the Rx Flow Hash Indirection table</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">struct</span> <span class="pre">net_device</span> <span class="pre">*</span> <span class="pre">netdev</span></code></dt>
<dd>Pointer to net_device struct of the device</dd>
<dt><code class="docutils literal"><span class="pre">const</span> <span class="pre">u32</span> <span class="pre">*</span> <span class="pre">indir</span></code></dt>
<dd>Pointer to the RSS indirection table</dd>
<dt><code class="docutils literal"><span class="pre">const</span> <span class="pre">u8</span> <span class="pre">*</span> <span class="pre">key</span></code></dt>
<dd>Pointer to the Rx Flow hash key</dd>
<dt><code class="docutils literal"><span class="pre">const</span> <span class="pre">u8</span> <span class="pre">hfunc</span></code></dt>
<dd>Pointer to the Rx Flow hash function</dd>
</dl>
<p><strong>Description</strong></p>
<ul class="simple">
<li>This is to support ethtool option “-X|- -set-rxfh-indir” which sets FEC settings.</li>
<li>Setting of the Rx Flow hash key is not supported</li>
</ul>
<p><strong>Return</strong></p>
<p>Returns 0 on Success or error code on Failure</p>
<dl class="function">
<dt id="c.qep_get_link_ksettings">
int <code class="descname">qep_get_link_ksettings</code><span class="sig-paren">(</span>struct net_device *<em>&nbsp;netdev</em>, struct ethtool_link_ksettings *<em>&nbsp;link_ksettings</em><span class="sig-paren">)</span><a class="headerlink" href="#c.qep_get_link_ksettings" title="Permalink to this definition">¶</a></dt>
<dd><p>This is an ethtool callback to get the Ethernet Link settings</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">struct</span> <span class="pre">net_device</span> <span class="pre">*</span> <span class="pre">netdev</span></code></dt>
<dd>Pointer to net_device struct of the device</dd>
<dt><code class="docutils literal"><span class="pre">struct</span> <span class="pre">ethtool_link_ksettings</span> <span class="pre">*</span> <span class="pre">link_ksettings</span></code></dt>
<dd>Pointer to ethtool link settings</dd>
</dl>
<p><strong>Description</strong></p>
<ul class="simple">
<li>This is to support the default “ethtool &lt;devname&gt;” command which gets the link settings.</li>
</ul>
<p><strong>Return</strong></p>
<p>Returns 0 on Success or error code on Failure</p>
<dl class="function">
<dt id="c.qep_set_link_ksettings">
int <code class="descname">qep_set_link_ksettings</code><span class="sig-paren">(</span>struct net_device *<em>&nbsp;netdev</em>, const struct ethtool_link_ksettings *<em>&nbsp;link_ksettings</em><span class="sig-paren">)</span><a class="headerlink" href="#c.qep_set_link_ksettings" title="Permalink to this definition">¶</a></dt>
<dd><p>This is an ethtool callback to set the Ethernet Link settings</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">struct</span> <span class="pre">net_device</span> <span class="pre">*</span> <span class="pre">netdev</span></code></dt>
<dd>Pointer to net_device struct of the device</dd>
<dt><code class="docutils literal"><span class="pre">const</span> <span class="pre">struct</span> <span class="pre">ethtool_link_ksettings</span> <span class="pre">*</span> <span class="pre">link_ksettings</span></code></dt>
<dd>Pointer to ethtool link settings</dd>
</dl>
<p><strong>Description</strong></p>
<ul class="simple">
<li><dl class="first docutils">
<dt>This is to support ethtool option “-s|- -change” which sets the below link settings.</dt>
<dd><ul class="first last">
<li>RSFEC</li>
<li>Auto Negotiation</li>
</ul>
</dd>
</dl>
</li>
</ul>
<p><strong>Return</strong></p>
<p>Returns 0 on Success or error code on Failure</p>
<dl class="function">
<dt id="c.qep_nway_reset">
int <code class="descname">qep_nway_reset</code><span class="sig-paren">(</span>struct net_device *<em>&nbsp;netdev</em><span class="sig-paren">)</span><a class="headerlink" href="#c.qep_nway_reset" title="Permalink to this definition">¶</a></dt>
<dd><p>This is an ethtool callback to restart N-WAY re-negotiation of the link</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">struct</span> <span class="pre">net_device</span> <span class="pre">*</span> <span class="pre">netdev</span></code></dt>
<dd>Pointer to net_device struct of the device</dd>
</dl>
<p><strong>Description</strong></p>
<ul class="simple">
<li>This is to support ethtool option “-r”..</li>
</ul>
<p><strong>Return</strong></p>
<p>Returns 0 on Success or error code on Failure</p>
<dl class="function">
<dt id="c.qep_reset">
int <code class="descname">qep_reset</code><span class="sig-paren">(</span>struct net_device *<em>&nbsp;netdev</em>, u32 *<em>&nbsp;reset</em><span class="sig-paren">)</span><a class="headerlink" href="#c.qep_reset" title="Permalink to this definition">¶</a></dt>
<dd><p>This is an ethtool callback to reset PHY, MAC and DMA based on the flags from enum ethtool_reset_flags</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">struct</span> <span class="pre">net_device</span> <span class="pre">*</span> <span class="pre">netdev</span></code></dt>
<dd>Pointer to net_device struct of the device</dd>
<dt><code class="docutils literal"><span class="pre">u32</span> <span class="pre">*</span> <span class="pre">reset</span></code></dt>
<dd>Pointer to flags that are toggled on successful reset</dd>
</dl>
<p><strong>Description</strong></p>
<ul class="simple">
<li>This is to support ethtool option “- -reset”</li>
</ul>
<p><strong>Return</strong></p>
<p>Returns 0 on Success or error code on Failure</p>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="debugfs.html" class="btn btn-neutral float-right" title="DebugFS Support" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="driver-design.html" class="btn btn-neutral" title="Driver Design" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019-2020, Xilinx, Inc.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'1.3.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>